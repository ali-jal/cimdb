<!-- Links to 'base_logged_in.html' as a base template file (which inherits from the base.html) -->
{% extends 'base_logged_in.html' %}

<!-- Title of the page -->
{% block title %} workorders{% endblock%}


{% block body %} 


<!-- add new form -->
<div class='intro-div'>
	<div class="two-column">
		<div class="information">
			<h3>Manage Work Orders</h3>
			<h5 class="access-level">This page requires supervisor-level access permission</h5>
			<p>Manage existing work orders or make a new one and assign it to an employee</p>
		</div>

		<div class="process-overview">
			<p>Workorder Process Overview</p>
			<ul class="list-group">
				<li class="list-group-item active" aria-current="true">1. Workorder</li>
				<li class="list-group-item">2. Products list</li>
				<li class="list-group-item">3. Components list</li>
			</ul>
		</div>
	</div>
</div>

<div id="data-entry-div">
	<h3>Approve and Assign a New Work Order:</h3>
	
	<form id="wo-data-entry" action="">

		<div class="inner-div">
			<label for="wo_employee_id">Employee in Charge:</label>
			<select class="custom-select" id="wo_employee_name_assign" required>
				{% for employee in employees %}
					<option value={{employee.employee_id}}>{{employee.employee_first_name}} {{employee.employee_last_name}}</option>
				{% endfor %}
			</select>

			<label for="ref">Reference Number: </label>
			<input type="number" name="ref" id="wo_reference_number_assign">

			<label for="date">Date: </label>
			<input type="date" name="date" id="wo_open_date_assign" >
	

		</div>

		<div class="inner-div">
			<input type="button" class="btn btn-success" value="Assign and Add" onclick=add_new_workorder() >
		</div>	

	</form>
</div>


<div id="data-filtering">
	<h3>Filter Approved Work Orders</h3>
	<p>Filter the the approved work orders using the form below:</p>

	<form id="wo-data-filter" action="">

		<div class="inner-div">
			<label for="wo_id">Workorder ID:</label>
			<input type="text" name="wo_id" id="wo_id_filter" placeholder="wo_id">
			
			<label for="wo_open_date">Workorder Open Date: </label>
			<input type="date" name="wo_open_date_filter" id="wo_open_date">

			<label for="wo_close_date">Workorder Close Date: </label>
			<input type="date" name="wo_close_date_filter" id="wo_close_date">
		</div>
		
		
		<div class="inner-div">
			<label for="wo_employee_id">Employee in Charge:</label>
			<select class="custom-select" id="wo_employee_name_filter" required>
				{% for employee in employees %}
					<option>{{employee.employee_first_name}} {{employee.employee_last_name}}</option>
				{% endfor %}
			</select>
			
			<label for="wo_status">status</label>
			<select name="wo_status" id="wo_status_filter">
				<option value="0">Pending_Assembly</option>
				<option value="1">Pending_QC</option>
				<option value="2">Pending_Shipping</option>
				<option value="3">Completed</option>
			</select>
		</div>
	
		<div class="inner-div">
			<input type="button" class="btn btn-primary" value="Filter" onclick=addData() >
			<input type="button" class="btn btn-primary" value="Clear Filters" onclick=clear() >
		</div>
	</form>
</div>



<!-- dummy content for demo --will be replaced -->
<div id="results">
	<table class="table table-striped" >
		<tr>
			<th>ID</th>
			<th>Open Date</th>
			<th>Close Date</th>
			<th>Status</th>
			<th>Refrence Number</th>
			<th>Employee</th>
			<th>Products</th>
			<th>Edit</th>
			<th>Delete</th>
		</tr>

		
		{% for wo in workorders %}
			<tr>
				<td>{{wo.wo_id}}</td>
				<td>{{wo.wo_open_date}}</td>
				<td>{{wo.wo_close_date}}</td>
				<td>{{wo.wo_status}}</td>
				<td>{{wo.wo_reference_number}}</td>
				<td>{{wo.wo_employee_full_name}}</td>
				<td><button class="btn btn-secondary" onclick=products_info("{{wo.wo_id}}")># of products</button></td>
				<td><button class="btn btn-warning" onclick=edit_workorder_info("{{wo.wo_id}}")>Edit</button></td>
				<td><button class="btn btn-danger" onclick=delete_workorder("{{wo.wo_id}}")>Delete</button></td>
			</tr>
		{% endfor %}

		
	</table>
	
</div>

<script src="{{ url_for('static', filename='js/workorders.js') }}"></script>

{% endblock%}



